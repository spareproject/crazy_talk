#!/bin/env bash
###############################################################################################################################################################################################################
clear;cat /etc/banner
for i in $(ls /mnt/rawfs/);do 
OUTPUT+="[ ${i} ] - "
if [[ -f /mnt/luks/${i} ]];then OUTPUT+="[ key ] ";fi
if [[ -b /dev/mapper/${i} ]];then OUTPUT+="[ mapped ] ";fi
if [[ $(mount | grep "/mnt/mount/${i} ") ]];then OUTPUT+="[ mounted ] ";fi
if [[ $(machinectl | grep "^${i} ") ]];then OUTPUT+="[ boot ] ";fi
OUTPUT+="\n"
done
echo -e $OUTPUT | column -t
###############################################################################################################################################################################################################
echo ""
unset OUTPUT
for i in $(mount | grep unionfs | awk '{print $3}');do
OUTPUT+="[ ${i#/mnt/mount/} ] - [ mounted ] "
if [[ $(machinectl | grep "^${i#/mnt/mount/} ") ]];then OUTPUT+="[ boot ] ";fi
OUTPUT+="\n"
done
echo -e $OUTPUT | column -t
###############################################################################################################################################################################################################
for i in $(ls /mnt/mount);do if [[ ! $(mount | grep ${i}) ]];then rmdir /mnt/mount/${i};fi;done
###############################################################################################################################################################################################################
